<?php

/**
 * XTodo
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ##PACKAGE##
 * @subpackage ##SUBPACKAGE##
 * @author     ##NAME## <##EMAIL##>
 * @version    SVN: $Id: Builder.php 5441 2009-01-30 22:58:43Z jwage $
 */
class XTodo extends BaseXTodo
{

public function setUp()

	{
		parent::setUp();
		
		$this->hasOne("XUser as ErstelltUser", array (
			'local' => "erstellt_von_id",
			"foreign" => "id"
			
		));
	
		$this->hasOne("XTodoKategorie as Kategorie", array (
			'local' => "kategorie_id",
			"foreign" => "id"
			
		));
		
			$this->hasOne("XTodoStatus as Status", array (
			'local' => "status",
			"foreign" => "id"
			
		));
		$this->actAs("ChangeCounted");
		
	}

	function getUserTodoTableProxy ($uid) {
		$q = Doctrine_Query::create()
			->from ("XTodo todo")
			->leftJoin ("todo.Kategorie kategorie")

			->where("(erstellt_von_id = ? OR person_id = ?) AND status_id <> 3 ", array( $uid, $uid) );
		return $q;
	}

}